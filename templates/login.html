<!doctype html>
<html lang="pt">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Login - Estoril Track Manager</title>
    <style>
      * { margin:0; padding:0; box-sizing:border-box; }
      html,body { 
        height:100%; 
        overflow:hidden;
      }
      body {
        font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
        background: #ffffff;
        color:#333;
        display:flex;
        align-items:center;
        justify-content:center;
        padding:20px;
      }
      .login-container {
        background: #eee1e1;
        border-radius:12px;
        padding:35px 30px;
        max-width:340px;
        width:100%;
        box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      }
      .logo {
        text-align:center;
        margin-bottom:25px;
      }
      .logo img {
        max-width:160px;
        height:auto;
        filter: drop-shadow(0 2px 8px rgba(0,0,0,0.1));
      }
      h1 {
        text-align:center;
        font-size:22px;
        margin-bottom:25px;
        font-weight:600;
        color:#333;
      }
      .form-group {
        margin-bottom:18px;
      }
      label {
        display:block;
        margin-bottom:6px;
        font-size:14px;
        color:#555;
      }
      input[type="text"],
      input[type="password"] {
        width:100%;
        padding:11px 14px;
        border-radius:6px;
        border:1px solid #ddd;
        background: #fafafa;
        color:#333;
        font-size:14px;
        transition: all 0.3s;
      }
      input[type="text"]:focus,
      input[type="password"]:focus {
        outline:none;
        border-color: #667eea;
        background: #fff;
      }
      input::placeholder {
        color: #aaa;
      }
      .btn {
        width:100%;
        padding:12px;
        border-radius:6px;
        border:none;
        font-size:15px;
        font-weight:600;
        cursor:pointer;
        transition: all 0.3s;
        margin-top:8px;
      }
      .btn-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color:#fff;
      }
      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(102,126,234,0.3);
      }
      .btn-secondary {
        background: transparent;
        border:1px solid #ddd;
        color:#555;
      }
      .btn-secondary:hover {
        background: #f8f8f8;
        border-color:#bbb;
      }
      .divider {
        text-align:center;
        margin:20px 0;
        position:relative;
        font-size:13px;
        color:#999;
      }
      .divider::before,
      .divider::after {
        content:'';
        position:absolute;
        top:50%;
        width:40%;
        height:1px;
        background: #e0e0e0;
      }
      .divider::before { left:0; }
      .divider::after { right:0; }
      .back-link {
        text-align:center;
        margin-top:18px;
      }
      .back-link a {
        color: #888;
        text-decoration:none;
        font-size:13px;
        transition: color 0.3s;
      }
      .back-link a:hover {
        color:#333;
      }
    </style>
  </head>
  <body>
    <div class="login-container">
      <div class="logo">
        <img src="static/assets/Estoril_Track_Logo.png" alt="Estoril Track Logo" />
      </div>
      
      <h1>Bem-vindo</h1>
      
      <form id="loginForm">
        <div class="form-group">
          <label for="username">Username</label>
          <input type="text" id="username" name="username" placeholder="Digite seu username" required />
        </div>
        
        <div class="form-group">
          <label for="password">Password</label>
          <input type="password" id="password" name="password" placeholder="Digite sua password" required />
        </div>
        
        <button type="submit" class="btn btn-primary">Entrar</button>
        
        <div class="divider">ou</div>
        
        <button type="button" class="btn btn-secondary" onclick="window.location.href='/register'">
          Criar Conta
        </button>
      </form>
      
      <div class="back-link">
        <a href="/">← Voltar à página inicial</a>
      </div>
    </div>

    <script>
      document.getElementById('loginForm').addEventListener('submit', function(e){
        e.preventDefault();
        const data = {
          username: document.getElementById('username').value,
          password: document.getElementById('password').value
        };
        
        fetch('/login', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(data)
        })
        .then(response => response.json())
        .then(result => {
          if(result.success){
            window.location.href = result.redirect;
          } else {
            alert('Erro: ' + result.message);
          }
        })
        .catch(error => {
          alert('Erro ao fazer login: ' + error);
        });
      });
    </script>
  </body>
</html>